function init(){scene=new THREE.Scene;var a=window.innerWidth,b=window.innerHeight,c=45,d=a/b,e=.1,f=2e4;camera=new THREE.PerspectiveCamera(c,d,e,f),scene.add(camera),camera.position.set(0,150,400),camera.lookAt(scene.position),renderer=new THREE.CanvasRenderer,renderer.setSize(a,b),container=document.getElementById("ThreeJS"),container.appendChild(renderer.domElement),controls=new THREE.OrbitControls(camera,renderer.domElement),headtrackr.controllers.three.realisticAbsoluteCameraControl(camera,23,[0,0,0],new THREE.Vector3(0,0,0),{damping:.4});var g=new headtrackr.Tracker({altVideo:{ogv:"./media/capture5.ogv",mp4:"./media/capture5.mp4"},cameraOffset:5});g.init(videoInput,canvasInput),g.start(),THREEx.WindowResize(renderer,camera),THREEx.FullScreen.bindKey({charCode:"m".charCodeAt(0)});var h=new THREE.PointLight(16777215);h.position.set(0,250,0),scene.add(h);{var i=new THREE.CubeGeometry(1e4,1e4,1e4),j=new THREE.MeshBasicMaterial({color:10066431,side:THREE.BackSide});new THREE.Mesh(i,j)}scene.fog=new THREE.FogExp2(10066431,25e-5),video=document.createElement("video"),video.src="videos/video.mp4",video.load(),video.play(),videoImage=document.createElement("canvas"),videoImage.width=1280,videoImage.height=720,videoImageContext=videoImage.getContext("2d"),videoImageContext.fillStyle="#000000",videoImageContext.fillRect(0,0,videoImage.width,videoImage.height),videoTexture=new THREE.Texture(videoImage),videoTexture.minFilter=THREE.LinearFilter,videoTexture.magFilter=THREE.LinearFilter;var k=new THREE.MeshBasicMaterial({map:videoTexture,overdraw:!0,side:THREE.DoubleSide}),l=new THREE.PlaneGeometry(videoImage.width,videoImage.height,4,4),m=new THREE.Mesh(l,k);m.position.set(0,0,0),scene.add(m),camera.position.set(0,0,600),camera.lookAt(m.position)}function animate(){requestAnimationFrame(animate),render(),update()}function update(){keyboard.pressed("p")&&video.play(),keyboard.pressed("space")&&video.pause(),keyboard.pressed("s")&&(video.pause(),video.currentTime=0),keyboard.pressed("r")&&(video.currentTime=0),controls.update()}function render(){video.readyState===video.HAVE_ENOUGH_DATA&&(videoImageContext.drawImage(video,0,0),videoTexture&&(videoTexture.needsUpdate=!0)),renderer.render(scene,camera)}var container,scene,camera,renderer,controls,stats,keyboard=new THREEx.KeyboardState,video,videoImage,videoImageContext,videoTexture,videoInput=document.getElementById("inputVideo"),canvasInput=document.getElementById("inputCanvas");init(),animate();